!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("_")):"function"==typeof define&&define.amd?define(["_"],t):"object"==typeof exports?exports.HumaneMath=t(require("_")):e.HumaneMath=t(e._)}(this,function(e){return function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);n(26),n(27),n(28),t["default"]=a.HumaneMath},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HumaneMath=void 0;var a=n(2),o=n(3),s=n(5),i=n(6),r=n(7),u=n(8),c=n(14),l=n(15),h=n(16),d=n(17),T=n(18),m=n(19),p=n(20),f=n(21),_=n(23),k=n(24),y=n(25),S={Message:a.Message,MessageList:o.MessageList,Pos:s.Pos,TokenType:i.TokenType,Token:r.Token,TokenStream:u.TokenStream,TreeNodeType:c.TreeNodeType,TreeNode:l.TreeNode,Tree:h.Tree,ValidationRule:d.ValidationRule,ValidationRules:T.ValidationRules,Validator:m.Validator,Dialect:p.Dialect,Locale:f.Locale,Symbols:_.Symbols,Text:k.Text,Calculator:y.Calculator,symbols:{},validationRules:{},locales:{}};S.addLocale=function(e,t){S.locales[e]=new f.Locale(t)},S.setLocale=function(e){S.currentLocale=e},t.HumaneMath=S},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.Message=function(){function e(){n(this,e)}return a(e,[{key:"construct",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];this._type=e,this._pos=t,this._params=n}},{key:"type",get:function(){return this._type}},{key:"pos",get:function(){return this._pos}},{key:"params",get:function(){return this._params}}]),e}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MessageList=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(4),r=a(i);t.MessageList=function(){function e(){for(var t=arguments.length,n=Array(t),a=0;t>a;a++)n[a]=arguments[a];if(o(this,e),this.clear(),n.length)for(var s=n.length-1;s>=0;s--)arguments[s]&&(this._list=this._list.concat(n[s]._list))}return s(e,[{key:"clear",value:function(){return this._list=[],this}},{key:"add",value:function(e){return this._list.push(e),this}},{key:"isEmpty",value:function(){return 0==this._list.length}},{key:"count",value:function(){return this._list.length}},{key:"sort",value:function(){return this._list=r["default"].sortBy(this._list,function(e){return e.pos?e.pos.pos+1e-4*e.pos.len:1/0}),this}}]),e}()},function(t,n){t.exports=e},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.Pos=function(){function e(){n(this,e)}return a(e,[{key:"construct",value:function(e,t,n,a){this.col=e,this.row=t,this.pos=n,this.len=a}},{key:"unite",value:function(t,n){return new e(t.col,t.row,t.pos,n.len+n.pos-t.pos)}},{key:"between",value:function(t,n){return new e(t.col+t.len,t.row,t.pos+t.len,n.pos-t.pos-t.len)}},{key:"beginning",value:function(t){return new e(t.col,t.row,t.pos,0)}},{key:"ending",value:function(t){return new e(t.col+t.len,t.row,t.pos+t.len,0)}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=t.TokenType=function o(){n(this,o)};a.EOF=0,a.RB_LEFT=1,a.RB_RIGHT=2,a.COMMA=3,a.EQUAL=11,a.LESS=12,a.MORE=13,a.LESS_EQUAL=14,a.MORE_EQUAL=15,a.ADD=21,a.SUBTRACT=22,a.MULTIPLY=23,a.DIVIDE=24,a.POWER=25,a.NUMBER=31,a.SYMBOL=32,a.SEMICOLON=33,a.E_UNKNOWN=128,a.E_NUMBER_MALFORMED=129,a.E_NUMBER_EXPONENTIAL=130,a.E_VERTICAL_SLASH=131,a.E_STARSTAR=132,a.E_EQUALEQUAL=133,a.E_MISPLACED_DOT=134,a.E_SB_LEFT=140,a.E_SB_RIGHT=141,a.E_CB_LEFT=142,a.E_CB_RIGHT=143,a.E_AB_LEFT=144,a.E_AB_RIGHT=145,a.E_BACK_SLASH=146,a.E_REST=150},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Token=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(4),r=a(i),u=n(5),c=n(6);t.Token=function(){function e(t,n,a,s,i,c){o(this,e),this.type=t,r["default"].isUndefined(i)||(this.pos=new u.Pos(n,a,s,i.length),this.raw=i),r["default"].isUndefined(c)||(this.value=c)}return s(e,[{key:"getHash",value:function(){return this.type+"|"+this.pos.pos+"|"+this.pos.row+"|"+(r["default"].isUndefined(this.value)?"":this.value)+"$"}},{key:"isEOF",value:function(){return this.type==c.TokenType.EOF}},{key:"isErrorToken",value:function(){return this.type>=c.TokenType.E_UNKNOWN}},{key:"isLeftBracket",value:function(){return this.type==c.TokenType.RB_LEFT||this.type==c.TokenType.E_SB_LEFT||this.type==c.TokenType.E_CB_LEFT||this.type==c.TokenType.E_AB_LEFT}},{key:"isRightBracket",value:function(){return this.type==c.TokenType.RB_RIGHT||this.type==c.TokenType.E_SB_RIGHT||this.type==c.TokenType.E_CB_RIGHT||this.type==c.TokenType.E_AB_RIGHT}},{key:"isNumber",value:function(){return this.type==c.TokenType.NUMBER||this.type==c.TokenType.E_NUMBER_MALFORMED||this.type==c.TokenType.E_NUMBER_EXPONENTIAL}},{key:"isSymbol",value:function(){return this.type==c.TokenType.SYMBOL}},{key:"isPowerSign",value:function(){return this.type==c.TokenType.POWER||this.type==c.TokenType.E_STARSTAR}},{key:"isTermSign",value:function(){return this.type==c.TokenType.MULTIPLY||this.type==c.TokenType.DIVIDE||this.type==c.TokenType.E_MISPLACED_DOT||this.type==c.TokenType.E_BACK_SLASH}},{key:"isMathOperator",value:function(){return this.isExpressionSign()||this.isTermSign()||this.isPowerSign()}},{key:"isExpressionSign",value:function(){return this.type==c.TokenType.ADD||this.type==c.TokenType.SUBTRACT}},{key:"isStatementSign",value:function(){return this.type==c.TokenType.EQUAL||this.type==c.TokenType.LESS||this.type==c.TokenType.MORE||this.type==c.TokenType.MORE_EQUAL||this.type==c.TokenType.LESS_EQUAL||this.type==c.TokenType.E_EQUALEQUAL}},{key:"cloneWithCorrectedType",value:function(){var e=r["default"].clone(this);return e.isErrorToken()&&(e.isRightBracket()?e.type=c.TokenType.RB_LEFT:e.isLeftBracket()?e.type=c.TokenType.LB_LEFT:e.isNumber()?e.type=c.TokenType.NUMBER:e.isPowerSign()&&(e.type=c.TokenType.POWER)),e}}]),e}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.TokenStream=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(4),r=a(i),u=n(9),c=a(u),l=n(13),h=a(l),d=n(2),T=n(3),m=n(7),p=n(6),f=t.TokenStream=function(){function e(){o(this,e),this.reset(),this.errors=new T.MessageList}return s(e,[{key:"getHash",value:function(){for(var e="",t=this.tokens.length-1;t>=0;t--)e=this.tokens[t].getHash()+e;return e}},{key:"reset",value:function(){this.raw=null,this.tokens=[],this.cursorPos=0}},{key:"skipSpaces",value:function(){for(var t=0;t<this.temp.raw.length;t++)if("\n"==this.temp.raw.charAt(t))this.temp.row++,this.temp.pos++,this.temp.col=0;else{if(-1===e.WHITESPACE.indexOf(this.temp.raw.charAt(t))){this.temp.raw=this.temp.raw.slice(t);break}this.temp.col++,this.temp.pos++}}},{key:"addToken",value:function(t,n,a,o){if(this.tokens.push(new m.Token(t,this.temp.col,this.temp.row,this.temp.pos,this.temp.raw.slice(0,n),a)),this.temp.pos+=n,this.temp.col+=n,this.temp.raw=this.temp.raw.slice(n),!o)throw e.TOKEN_FOUND_EXCEPTION}},{key:"tokenize",value:function(t){if(t===this.raw)return!1;this.reset(),this.raw=t,this.temp={},this.temp.raw=(0,h["default"])(t),this.temp.pos=0,this.temp.col=0,this.temp.row=0;for(var n=e.MAX_TOKEN_COUNT;n>=0&&(this.skipSpaces(),""!=this.temp.raw);n--)try{if("<"==this.temp.raw.charAt(0)||">"==this.temp.raw.charAt(0)){var a=(0,c["default"])(this.temp.raw.slice(1));"="==a.charAt(0)&&this.addToken("<"==this.temp.raw.charAt(0)?p.TokenType.LESS_EQUAL:p.TokenType.MORE_EQUAL,this.temp.raw.length-a.length+1)}if("="==this.temp.raw.charAt(0)){var a=r["default"].ltrim(this.temp.raw.slice(1));"="==a.charAt(0)&&this.addToken(p.TokenType.E_EQUALEQUAL,this.temp.raw.length-a.length+1)}if("*"==this.temp.raw.charAt(0)){var a=r["default"].ltrim(this.temp.raw.slice(1));"*"==a.charAt(0)&&this.addToken(p.TokenType.E_STARSTAR,this.temp.raw.length-a.length+1)}switch(this.temp.raw.charAt(0)){case"(":this.addToken(p.TokenType.RB_LEFT,1);case")":this.addToken(p.TokenType.RB_RIGHT,1);case",":this.addToken(p.TokenType.COMMA,1);case";":this.addToken(p.TokenType.SEMICOLON,1);case"=":this.addToken(p.TokenType.EQUAL,1);case"<":this.addToken(p.TokenType.LESS,1);case">":this.addToken(p.TokenType.MORE,1);case"≤":this.addToken(p.TokenType.LESS,1);case"≥":this.addToken(p.TokenType.MORE,1);case"+":this.addToken(p.TokenType.ADD,1);case"-":case"—":case"−":case"–":case"―":this.addToken(p.TokenType.SUBTRACT,1);case"*":case"×":case"·":this.addToken(p.TokenType.MULTIPLY,1);case"/":case"÷":this.addToken(p.TokenType.DIVIDE,1);case"^":this.addToken(p.TokenType.POWER,1);case"[":this.addToken(p.TokenType.E_SB_LEFT,1);case"]":this.addToken(p.TokenType.E_SB_RIGHT,1);case"{":this.addToken(p.TokenType.E_CB_LEFT,1);case"}":this.addToken(p.TokenType.E_CB_RIGHT,1);case"⟨":this.addToken(p.TokenType.E_AB_LEFT,1);case"⟩":this.addToken(p.TokenType.E_AB_RIGHT,1);case"|":this.addToken(p.TokenType.E_VERTICAL_SLASH,1);case"\\":this.addToken(p.TokenType.E_BACK_SLASH,1)}var o;o=this.temp.raw.match(e.RE_SYMBOL),o&&this.addToken(p.TokenType.SYMBOL,o[0].length,o[0].toLowerCase()),o=this.temp.raw.match(e.RE_E_NUMBER_MALFORMED),o&&!r["default"].isUndefined(o[4])?(!r["default"].isUndefined(o[4])&&o[4].length>0&&(o[1]=o[1].slice(0,o[1].length-1)),this.addToken(p.TokenType.E_NUMBER_MALFORMED,o[1].length,o[1].toLowerCase())):o&&this.addToken(p.TokenType.E_NUMBER_MALFORMED,o[0].length,o[0].toLowerCase()),o=this.temp.raw.match(e.RE_E_NUMBER_EXPONENTIAL),o&&this.addToken(p.TokenType.E_NUMBER_EXPONENTIAL,o[0].length,Number(o[0].replace(/[Ее]/,"E"))),o=this.temp.raw.match(e.RE_NUMBER),o&&this.addToken(p.TokenType.NUMBER,o[0].length,Number(o[0])),"."==this.temp.raw.charAt(0)&&this.addToken(p.TokenType.E_MISPLACED_DOT,1),this.addToken(p.TokenType.E_UNKNOWN,1)}catch(s){if(s!=e.TOKEN_FOUND_EXCEPTION)throw s}this.temp.raw.length&&this.addToken(p.TokenType.E_REST,this.temp.raw.length,null,!0),this.addToken(p.TokenType.EOF,0,null,!0),delete this.temp;var i=this.getHash();if(i==this.oldHash)return!1;this.oldHash=i,this.errors.clear();for(var n=this.tokens.length-1;n>=0;n--)this.tokens[n].isErrorToken()&&this.errors.add(new d.Message("e_lex_"+this.tokens[n].type,this.tokens[n].pos,this.tokens[n]));return!0}},{key:"getToken",value:function(e,t){return t&&(this.cursorPos=e),this.cursorPos>=this.tokens.length&&(this.cursorPos=this.tokens.length-1),r["default"].isUndefined(this.tokens[e])?null:this.tokens[e]}},{key:"firstToken",value:function(e){return this.getToken(0,e)}},{key:"lastToken",value:function(e){return this.getToken(this.tokens.length-2,e)}},{key:"previousToken",value:function(e){return this.getToken(this.cursorPos-1,e)}},{key:"nextToken",value:function(e){return this.getToken(this.cursorPos+1,e)}},{key:"currentToken",value:function(){return this.getToken(this.cursorPos)}},{key:"findNextToken",value:function(e,t){r["default"].isArray(e)||(e=[e]);for(var n=this.cursorPos;n<this.tokens.length;n++){var a=this.getToken(n);for(var o in e)if(e[o]==a.type)return t&&(this.cursorPos=n),a}return null}},{key:"findNextTokenAtTheSameLevel",value:function(e,t){r["default"].isArray(e)||(e=[e]);for(var n=0,a=this.cursorPos;a<this.tokens.length;a++){if(0>n)return null;var o=this.getToken(a);if(o.isLeftBracket()&&++n,0==n)for(var s in e)if(e[s]==o.type)return t&&(this.cursorPos=a),o;o.isRightBracket()&&--n}return null}}]),e}();f.MAX_TOKEN_COUNT=500,f.WHITESPACE=" \n\r	\f\x0B            ​\u2028\u2029　",f.TOKEN_FOUND_EXCEPTION=42,f.RE_NUMBER=/^[0-9]+(\.[0-9]+)?/,f.RE_SYMBOL=/^[a-zA-Zа-яА-ЯёЁα-ωΑ-Ω][_a-zA-Zа-яА-ЯёЁα-ωΑ-Ω0-9]*/,f.RE_E_NUMBER_MALFORMED=/^(\.[0-9]+|[0-9]+(\.[0-9]+){2,}|([0-9]+\.([^0-9]|$)))/,f.RE_E_NUMBER_EXPONENTIAL=/^[0-9]+(\.[0-9]+)?[EeЕе][+-]?[0-9]+/},function(e,t,n){var a=n(10),o=n(11),s=String.prototype.trimLeft;e.exports=function(e,t){return e=a(e),!t&&s?s.call(e):(t=o(t),e.replace(new RegExp("^"+t+"+"),""))}},function(e,t){e.exports=function(e){return null==e?"":""+e}},function(e,t,n){var a=n(12);e.exports=function(e){return null==e?"\\s":e.source?e.source:"["+a(e)+"]"}},function(e,t,n){var a=n(10);e.exports=function(e){return a(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}},function(e,t,n){var a=n(10),o=n(11),s=String.prototype.trimRight;e.exports=function(e,t){return e=a(e),!t&&s?s.call(e):(t=o(t),e.replace(new RegExp(t+"+$"),""))}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=t.TreeNodeType=function o(){n(this,o)};a.EMPTY=0,a.SEQUENCE_OF_STATEMENTS=1,a.STATEMENT=2,a.EXPRESSION=3,a.TERM=4,a.POWER=5,a.SYMBOL=6,a.NUMBER=7,a.FUNCTION=8,a.STANDARD_CONSTANT=32,a.STANDARD_VARIABLE=33,a.STANDARD_FUNCTION=34,a.STATEMENT_EQUATION=66,a.STATEMENT_INEQUALITY=67,a.E_UNPARSED=128},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.TreeNode=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),s=n(14);t.TreeNode=function(){function e(){a(this,e),this.type=s.TreeNodeType.EMPTY,this.brackets=!1,this.hasErrors=!1}return o(e,[{key:"isEmpty",value:function(){return this.type==s.TreeNodeType.EMPTY}},{key:"isUnparsed",value:function(){return this.type==s.TreeNodeType.UNPARSED}}]),e}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Tree=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(4),r=a(i),u=n(2),c=n(3),l=n(5),h=n(6),d=n(7),T=n(14),m=n(15),p=t.Tree=function(){function e(){o(this,e),this.reset(),this.errors=new c.MessageList}return s(e,[{key:"getHash",value:function(){}},{key:"reset",value:function(){this.tokenStream=null,this.root=null}},{key:"parse",value:function(e){return this.reset(),this.errors.clear(),this.tokenStream=e,this.checkForMissedOperands(),this.tokenStream.firstToken(!0),this.root=this.subparseStatementSequence(),this.tokenStream.currentToken().type!=h.TokenType.EOF&&this.errors.add(new u.Message("e_syn_unknown",this.tokenStream.currentToken().pos)),!0}},{key:"subparseStatementSequence",value:function(){var e=this.createEmptyTreeNode(),t=this.tokenStream.currentToken(),n=this.subparseStatement();for(e.subNodes=[],e.subActions=[],e.type=T.TreeNodeType.SEQUENCE_OF_STATEMENTS;!this.tokenStream.currentToken().isEOF();)this.tokenStream.currentToken().type==h.TokenType.SEMICOLON||this.tokenStream.currentToken().type==h.TokenType.COMMA?(e.subActions.push(this.tokenStream.currentToken()),this.tokenStream.currentToken().type==h.TokenType.COMMA&&this.errors.add(new u.Message("e_syn_statements_comma",this.tokenStream.currentToken().pos))):(this.tokenStream.currentToken().isRightBracket()?this.errors.add(new u.Message("e_syn_extra_rb",this.tokenStream.currentToken().pos,{currentToken:this.tokenStream.currentToken()})):this.tokenStream.currentToken().isErrorToken()||this.errors.add(new u.Message("e_syn_statements_wrong_symbol",this.tokenStream.currentToken().pos,{currentToken:this.tokenStream.currentToken()})),this.tokenStream.findNextToken([h.TokenType.SEMICOLON],!0)?(e.subActions.push(this.tokenStream.currentToken()),this.tokenStream.previousToken(!0)):this.tokenStream.lastToken(!0),(n.type==T.TreeNodeType.SYMBOL||n.type==T.TreeNodeType.NUMBER||n.type==T.TreeNodeType.FUNCTION)&&(n=this.wrapNode(n)),n.type=T.TreeNodeType.E_UNPARSED,n.hasErrors=!0,n.pos=l.Pos.unite(n.pos,this.tokenStream.currentToken().pos),this.tokenStream.currentToken()!=this.tokenStream.lastToken()&&this.tokenStream.nextToken(!0)),this.tokenStream.nextToken(!0),e.subNodes.push(n),n=this.subparseStatement();return e.subNodes.push(n),1==e.subNodes.length||0==e.subActions.length?e.subNodes[0]:(e.subNodes[e.subNodes.length-1].isEmpty()&&delete e.subNodes[e.subNodes.length-1],e.pos=l.Pos.unite(t.pos,this.tokenStream.currentToken().pos),e)}},{key:"subparseStatement",value:function(){var e=this.createEmptyTreeNode(),t=this.tokenStream.currentToken(),n=this.subparseExpression(),a=null,o=null;if(this.tokenStream.currentToken().isStatementSign()){switch(o=this.tokenStream.currentToken(),this.tokenStream.nextToken(!0),a=this.subparseExpression(),n.isEmpty()&&this.errors.add(new u.Message("e_syn_statement_empty_left",n.pos,{currentToken:o})),a.isEmpty()&&this.errors.add(new u.Message("e_syn_statement_empty_right",a.pos,{currentToken:o})),e.type=T.TreeNodeType.STATEMENT,e.subNodes=[n,a],e.subActions=[o],o.type){case h.TokenType.LESS:case h.TokenType.MORE:case h.TokenType.LESS_EQUAL:case h.TokenType.MORE_EQUAL:e.subType=T.TreeNodeType.STATEMENT_INEQUALITY;break;default:e.subType=T.TreeNodeType.STATEMENT_EQUATION}for(;this.tokenStream.currentToken().isStatementSign();)e.hasErrors=!0,this.errors.add(new u.Message("e_syn_statement_extra_statement_sign",this.tokenStream.currentToken().pos,{currentToken:this.tokenStream.currentToken(),statementSign:o})),e.subActions.push(this.tokenStream.currentToken()),this.tokenStream.nextToken(!0),e.subNodes.push(this.subparseExpression());return e.pos=l.Pos.unite(t.pos,this.tokenStream.previousToken().pos),e}return n}},{key:"subparseExpression",value:function(){var e=this.createEmptyTreeNode(),t=this.tokenStream.currentToken(),n=this.subparseTerm();if(!this.tokenStream.currentToken().isExpressionSign())return n;for(e.subNodes=[n],e.subActions=[],e.type=T.TreeNodeType.EXPRESSION;this.tokenStream.currentToken().isExpressionSign();)e.subActions.push(this.tokenStream.currentToken()),n.isEmpty()&&1!=e.subNodes.length&&(e.hasErrors=!0),this.tokenStream.nextToken(!0),n=this.subparseTerm(),e.subNodes.push(n);return r["default"].each(e.subNodes,function(t){t.hasErrors&&(e.hasErrors=!0,r["default"].breakLoop())}),e.subNodes[0].isEmpty()&&(e.subActions[0].type==h.TokenType.SUBTRACT?(e.subNodes[0].type=T.TreeNodeType.NUMBER,e.subNodes[0].value=0):e.hasErrors=!0),e.pos=l.Pos.unite(t.pos,this.tokenStream.previousToken().pos),e}},{key:"subparseTerm",value:function(){var e=this.createEmptyTreeNode(),t=this.tokenStream.currentToken();e.type=T.TreeNodeType.TERM;var n=this.subparsePower();for(e.subNodes=[n],e.subActions=[];;)if(this.tokenStream.currentToken().isTermSign()||this.tokenStream.currentToken().isErrorToken()&&!this.tokenStream.currentToken().isStatementSign()&&!this.tokenStream.currentToken().isNumber()&&!this.tokenStream.currentToken().isLeftBracket()&&!this.tokenStream.currentToken().isRightBracket())this.tokenStream.currentToken().isErrorToken()&&(e.hasErrors=!0),e.subActions.push(this.tokenStream.currentToken()),this.tokenStream.nextToken(!0),n=this.subparsePower(),e.subNodes.push(n);else{if(!(this.tokenStream.currentToken().isNumber()||this.tokenStream.currentToken().isLeftBracket()||this.tokenStream.currentToken().isSymbol()))break;this.tokenStream.previousToken().isNumber()&&(this.tokenStream.currentToken().isSymbol()||this.tokenStream.currentToken().isLeftBracket())||(e.hasErrors=!0,(!this.tokenStream.previousToken().isErrorToken()||this.tokenStream.previousToken().isMathOperator()||this.tokenStream.previousToken().isNumber())&&this.errors.add(new u.Message("e_syn_missing_multiply",l.Pos.between(this.tokenStream.previousToken().pos,this.tokenStream.currentToken().pos),{previousToken:this.tokenStream.previousToken().cloneWithCorrectedType(),currentToken:this.tokenStream.currentToken().cloneWithCorrectedType()})));var a=new d.Token(h.TokenType.MULTIPLY);a.pos=l.Pos.between(this.tokenStream.previousToken().pos,this.tokenStream.currentToken().pos),e.subActions.push(a),n=this.subparsePower(),e.subNodes.push(n)}return 1==e.subNodes.length?e.subNodes[0]:(r["default"].each(e.subNodes,function(t){(t.hasErrors||t.type==T.TreeNodeType.EMPTY)&&(e.hasErrors=!0,r["default"].breakLoop())}),e.pos=l.Pos.unite(t.pos,this.tokenStream.previousToken().pos),e.type=T.TreeNodeType.TERM,e)}},{key:"subparsePower",value:function(){var e=this.createEmptyTreeNode(),t=this.tokenStream.currentToken(),n=this.subparseFactor();if(!this.tokenStream.currentToken().isPowerSign())return n;for(e.subNodes=[n],e.subActions=[];this.tokenStream.currentToken().isPowerSign();)e.subActions.push(this.tokenStream.currentToken().type),this.tokenStream.nextToken(!0),n=this.subparseFactor(),e.subNodes.push(n);return r["default"].each(e.subNodes,function(t){(t.hasErrors||t.type==T.TreeNodeType.EMPTY)&&(e.hasErrors=!0,r["default"].breakLoop())}),e.pos=l.Pos.unite(t.pos,this.tokenStream.previousToken().pos),e.type=T.TreeNodeType.POWER,e}},{key:"subparseFactor",value:function(){var e=this.createEmptyTreeNode(),t=this.tokenStream.currentToken();if(t.isNumber())return e.type=T.TreeNodeType.NUMBER,e.pos=this.tokenStream.currentToken().pos,e.value=this.tokenStream.currentToken().value,this.tokenStream.nextToken(!0),e;if(t.type==h.TokenType.SYMBOL){if(!this.tokenStream.nextToken().isLeftBracket())return e.type=T.TreeNodeType.SYMBOL,e.pos=this.tokenStream.currentToken().pos,e.name=this.tokenStream.currentToken().value,e.nameRaw=this.tokenStream.currentToken().raw,this.tokenStream.nextToken(!0),e;if(e.type=T.TreeNodeType.FUNCTION,e.name=this.tokenStream.currentToken().value,e.namePos=this.tokenStream.currentToken().pos,e.nameRaw=this.tokenStream.currentToken().raw,e.subNodes=[],this.tokenStream.nextToken(!0),e.argumentPos=l.Pos.ending(this.tokenStream.currentToken().pos),this.tokenStream.nextToken(!0),this.tokenStream.currentToken().isRightBracket())return e.pos=l.Pos.unite(t.pos,this.tokenStream.currentToken().pos),e.argumentPos=l.Pos.between(e.argumentPos,this.tokenStream.currentToken().pos),this.tokenStream.nextToken(!0),e;for(var n;;){if(n=this.subparseExpression(),e.subNodes.push(n),(this.tokenStream.currentToken().isRightBracket()||this.tokenStream.currentToken().type==h.TokenType.COMMA||this.tokenStream.currentToken().type==h.TokenType.SEMICOLON)&&n.type==T.TreeNodeType.EMPTY&&(n.pos=l.Pos.between(this.tokenStream.previousToken().pos,this.tokenStream.currentToken().pos),e.hasErrors=!0,this.errors.add(new u.Message("e_syn_function_argument_empty",n.pos))),this.tokenStream.currentToken().isRightBracket())return e.pos=l.Pos.unite(t.pos,this.tokenStream.currentToken().pos),e.argumentPos=l.Pos.between(e.argumentPos,this.tokenStream.currentToken().pos),this.tokenStream.nextToken(!0),e;if(this.tokenStream.currentToken().type!=h.TokenType.COMMA&&this.tokenStream.currentToken().type!=h.TokenType.SEMICOLON){e.hasErrors=!0,this.tokenStream.currentToken().isEOF()||((n.type==T.TreeNodeType.SYMBOL||n.type==T.TreeNodeType.NUMBER||n.type==T.TreeNodeType.FUNCTION)&&(n=this.wrapNode(n),n.hasErrors=!0,e.subNodes.pop(),e.subNodes.push(n)),n.type=T.TreeNodeType.E_UNPARSED,this.tokenStream.currentToken().isErrorToken()||this.errors.add(new u.Message("e_syn_function_argument_wrong_symbol",this.tokenStream.currentToken().pos,{currentToken:this.tokenStream.currentToken()})));var a=this.tokenStream.findNextTokenAtTheSameLevel([h.TokenType.RB_RIGHT,h.TokenType.E_SB_RIGHT,h.TokenType.COMMA,h.TokenType.SEMICOLON],!0);if(a){if(n.pos=l.Pos.unite(n.pos,this.tokenStream.previousToken().pos),a.type==h.TokenType.COMMA){this.tokenStream.nextToken(!0);continue}e.pos=l.Pos.unite(t.pos,this.tokenStream.currentToken().pos),this.tokenStream.nextToken(!0)}else this.tokenStream.lastToken(!0),e.pos=l.Pos.unite(t.pos,this.tokenStream.lastToken().pos),this.errors.add(new u.Message("e_syn_missing_rb",l.Pos.ending(this.tokenStream.currentToken().pos))),this.tokenStream.nextToken(!0);return e.argumentPos=l.Pos.between(e.argumentPos,this.tokenStream.previousToken().pos),e}this.tokenStream.currentToken().type==h.TokenType.SEMICOLON&&(this.errors.add(new u.Message("e_syn_function_argument_semicolon",this.tokenStream.currentToken().pos)),e.hasErrors=!0),this.tokenStream.nextToken(!0)}}else if(this.tokenStream.currentToken().isLeftBracket()){if(this.tokenStream.nextToken(!0),e=this.subparseExpression(),this.tokenStream.currentToken().isRightBracket())return e.type!=T.TreeNodeType.EMPTY||e.brackets||(this.errors.add(new u.Message("e_syn_brackets_empty",l.Pos.unite(this.tokenStream.previousToken().pos,this.tokenStream.currentToken().pos))),this.hasErrors=!0),e.brackets=!0,this.tokenStream.nextToken(!0),e;(e.type==T.TreeNodeType.SYMBOL||e.type==T.TreeNodeType.NUMBER||e.type==T.TreeNodeType.FUNCTION)&&(e=this.wrapNode(e)),e.hasErrors=!0,e.type=T.TreeNodeType.E_UNPARSED,this.tokenStream.currentToken().isErrorToken()||this.tokenStream.currentToken().isEOF()||this.tokenStream.currentToken().type==h.TokenType.SEMICOLON||this.errors.add(new u.Message("e_syn_brackets_wrong_symbol",this.tokenStream.currentToken().pos,{currentToken:this.tokenStream.currentToken()}));var o=this.tokenStream.findNextTokenAtTheSameLevel([h.TokenType.RB_RIGHT,h.TokenType.E_SB_RIGHT,h.TokenType.SEMICOLON],!0);o?o.isRightBracket()?(e.pos=l.Pos.unite(t.pos,this.tokenStream.currentToken().pos),this.tokenStream.nextToken(!0)):(e.pos=l.Pos.unite(t.pos,this.tokenStream.previousToken().pos),this.errors.add(new u.Message("e_syn_missing_rb",l.Pos.ending(e.pos)))):(this.tokenStream.lastToken(!0),e.pos=l.Pos.unite(t.pos,this.tokenStream.lastToken().pos),this.errors.add(new u.Message("e_syn_missing_rb",l.Pos.ending(e.pos))),this.tokenStream.nextToken(!0))}if(this.tokenStream.currentToken().isErrorToken()&&!this.tokenStream.currentToken().isMathOperator()&&!this.tokenStream.currentToken().isRightBracket()){for(e.type=T.TreeNodeType.UNPARSED;this.tokenStream.currentToken().isErrorToken()&&!this.tokenStream.currentToken().isMathOperator()||(this.tokenStream.currentToken().isNumber()||this.tokenStream.currentToken().isSymbol())&&this.tokenStream.nextToken().isErrorToken()&&!this.tokenStream.nextToken().isMathOperator();)this.tokenStream.nextToken(!0);e.pos=l.Pos.unite(t.pos,this.tokenStream.currentToken().pos)}return e}},{key:"createEmptyTreeNode",value:function(){var e=new m.TreeNode;return this.tokenStream.currentToken()==this.tokenStream.firstToken()?e.pos=l.Pos.between(new l.Pos(0,0,0,0),this.tokenStream.currentToken().pos):e.pos=l.Pos.between(this.tokenStream.previousToken().pos,this.tokenStream.currentToken().pos),e}},{key:"checkForMissedOperands",value:function(){this.tokenStream.firstToken(!0);var e,t,n;do t=this.tokenStream.currentToken(),t.isMathOperator()&&!t.isErrorToken()&&(e=this.tokenStream.previousToken(),n=this.tokenStream.nextToken(),t.type==h.TokenType.SUBTRACT||e&&(e.isMathOperator()||e.isRightBracket()||e.isNumber()||e.isSymbol())||this.errors.add(new u.Message("e_syn_missing_operand_at_begin",l.Pos.beginning(this.tokenStream.currentToken().pos),{currentToken:t})),n&&n.isMathOperator()&&!n.isErrorToken()&&this.errors.add(new u.Message("e_syn_missing_operand",l.Pos.between(t.pos,n.pos),{previousToken:t,currentToken:n})),n&&(n.isMathOperator()||n.isNumber()||n.isSymbol()||n.isLeftBracket()||n.type===h.TokenType.E_REST)||this.errors.add(new u.Message("e_syn_missing_operand_at_end",l.Pos.between(t.pos,n.pos),{currentToken:t})));while(this.tokenStream.nextToken(!0))}},{key:"wrapNode",value:function(e){var t=this.createEmptyTreeNode();return t.subNodes=[e],t.pos=e.pos,t.hasErrors=e.hasErrors,t}}]),e}();p.MAX_NODE_COUNT=500},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationRule=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(4),r=a(i),u=t.ValidationRule=function(){function e(t,n){o(this,e),t||(t=e.NO),this.value=t,r["default"].isArray(n)?this.list=n:null!=n&&r["default"].extend(this,n)}return s(e,[{key:"isNo",value:function(){return this.value==e.NO}},{key:"isOnly",value:function(){return this.value==e.ONLY}},{key:"isExcluding",value:function(){return this.value==e.EXCLUDING}},{key:"isYes",value:function(){return this.value==e.YES}}]),e}();u.NO=0,u.ONLY=1,u.EXCLUDING=2,u.YES=4},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationRules=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(4),r=a(i),u=n(17);t.ValidationRules=function(){function e(){o(this,e),this.allowFunctions=new u.ValidationRule,this.allowConstants=new u.ValidationRule,this.allowVariables=new u.ValidationRule,this.acceptEquations=new u.ValidationRule,this.acceptInequalities=new u.ValidationRule,this.acceptSequenceOfStatements=new u.ValidationRule,this.acceptEmpty=new u.ValidationRule,this.acceptOnlyNumber=new u.ValidationRule,this.valueOnlyFinite=new u.ValidationRule,this.valueOnlyInteger=new u.ValidationRule,this.valueRange=new u.ValidationRule,this.valueOnlyGreaterThan=new u.ValidationRule,this.valueOnlyLessThan=new u.ValidationRule}return s(e,[{key:"setRule",value:function(e,t,n){return this[e]=new u.ValidationRule(t,n),this}},{key:"clone",value:function(){var t=new e;return r["default"].extend(t,r["default"].map(this,r["default"].clone)),t}}]),e}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Validator=void 0;var s=function(){
function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(4),r=a(i),u=n(2),c=n(3),l=n(5),h=n(6),d=n(14);t.Validator=function(){function e(){o(this,e),this.errors=new c.MessageList,this.warnings=new c.MessageList}return s(e,[{key:"validate",value:function(e,t,n,a){return this.errors.clear(),n.acceptEmpty.isNo()&&e.root.isEmpty()?this.errors.add(new u.Message("e_sem_forbidden_empty",e.root.pos)):this.validateNode(e.root,t,n),a&&this.errors.isEmpty()&&(a.calculateCachedValues(e.root),n.valueOnlyInteger.isYes()&&isFinite(e.root.value)&&Math.round(e.root.value)!=e.root.value?this.errors.add(new u.Message("e_sem_expected_int",e.root.pos,{value:e.root.value})):n.valueOnlyFinite.isYes()&&!isFinite(e.root.value)&&this.errors.add(new u.Message("e_sem_expected_finite",e.root.pos,{value:e.root.value})),n.valueRange.isOnly()&&isFinite(e.root.value)&&(e.root.value<n.valueRange.min||e.root.value>n.valueRange.max)&&this.errors.add(new u.Message("e_sem_expected_range",e.root.pos,{value:e.root.value,range:n.valueRange})),n.valueOnlyGreaterThan.isYes()&&isFinite(e.root.value)&&isFinite(n.valueOnlyGreaterThan.bound)&&e.root.value<=n.valueOnlyGreaterThan.bound&&this.errors.add(new u.Message("e_sem_expected_gt",e.root.pos,{value:e.root.value,bound:n.valueOnlyGreaterThan.bound})),n.valueOnlyLessThan.isYes()&&isFinite(e.root.value)&&e.root.value>=n.valueOnlyLessThan.bound&&this.errors.add(new u.Message("e_sem_expected_lt",e.root.pos,{value:e.root.value,bound:n.valueOnlyLessThan.bound}))),!0}},{key:"validateNode",value:function(e,t,n){var a,o;switch(e.type){case d.TreeNodeType.SYMBOL:return a=t.findConstant(e.name),o={name:e.nameRaw,id:a},a?(e.id=a,e.subType=d.TreeNodeType.STANDARD_CONSTANT,void(n.allowConstants.isNo()?this.errors.add(new u.Message("e_sem_constant_forbidden_all",e.pos,o)):(n.allowConstants.isOnly()&&-1==r["default"].indexOf(n.allowConstants.list,a)||n.allowConstants.isExcluding()&&-1!==r["default"].indexOf(n.allowConstants.list,a))&&this.errors.add(new u.Message("e_sem_constant_forbidden_this",e.pos,o)))):(a=t.findVariable(e.name),o={name:e.nameRaw,id:a},a?(e.id=a,e.subType=d.TreeNodeType.STANDARD_VARIABLE,void(n.allowVariables.isNo()?this.errors.add(new u.Message("e_sem_variable_forbidden_all",e.pos,o)):(n.allowVariables.isOnly()&&-1==r["default"].indexOf(n.allowVariables.list,a)||n.allowVariables.isExcluding()&&-1!==r["default"].indexOf(n.allowVariables.list,a))&&this.errors.add(new u.Message("e_sem_variable_forbidden_this",e.pos,o)))):(a=t.findFunction(e.name))?void this.errors.add(new u.Message("e_sem_function_as_symbol",e.pos,{name:e.nameRaw,id:a})):void this.errors.add(new u.Message("e_sem_unknown_symbol",e.pos,{name:e.nameRaw})));case d.TreeNodeType.FUNCTION:if(this.validateSubNodes(e,t,n),a=t.findFunction(e.name),o={name:e.nameRaw,id:a},a){e.id=a,e.subType=d.TreeNodeType.STANDARD_FUNCTION,n.allowFunctions.isNo()?this.errors.add(new u.Message("e_sem_function_forbidden_all",e.namePos,o)):(n.allowFunctions.isOnly()&&-1==r["default"].indexOf(n.allowFunctions.list,a)||n.allowFunctions.isExcluding()&&-1!==r["default"].indexOf(n.allowFunctions.list,a))&&this.errors.add(new u.Message("e_sem_function_forbidden_this",e.namePos,o));var s,i=t.functions[a].argumentCount,c=e.subNodes.length;return o={name:e.nameRaw,argumentCount:i,realArgumentCount:c},void(r["default"].isNumber(i)?c>i?(s=e.subNodes[i-1]?l.Pos.unite(l.Pos.ending(e.subNodes[i-1].pos),l.Pos.ending(e.argumentPos)):e.argumentPos,this.errors.add(new u.Message("e_sem_function_arguments_extra_exact",s,o))):i>c&&(s=c?l.Pos.unite(l.Pos.ending(e.subNodes[c-1].pos),l.Pos.ending(e.argumentPos)):e.argumentPos,this.errors.add(new u.Message("e_sem_function_arguments_few_exact",s,o))):i.max==1/0?c<i.min&&(s=c?l.Pos.unite(l.Pos.ending(e.subNodes[c-1].pos),l.Pos.ending(e.argumentPos)):e.argumentPos,this.errors.add(new u.Message("e_sem_function_arguments_few_range_n_inf",s,o))):(c<i.min&&(s=c?l.Pos.unite(l.Pos.ending(e.subNodes[c-1].pos),l.Pos.ending(e.argumentPos)):e.argumentPos,this.errors.add(new u.Message("e_sem_function_arguments_few_range_n_n",s,o))),c>i.max&&(s=l.Pos.unite(l.Pos.ending(e.subNodes[i.max-1].pos),l.Pos.ending(e.argumentPos)),this.errors.add(new u.Message("e_sem_function_arguments_extra_range_n_n",s,o)))))}return(a=t.findConstant(e.name))?void this.errors.add(new u.Message("e_sem_constant_as_function",e.namePos,{name:e.nameRaw,id:a})):(a=t.findVariable(e.name))?void this.errors.add(new u.Message("e_sem_variable_as_function",e.namePos,{name:e.nameRaw,id:a})):void this.errors.add(new u.Message("e_sem_unknown_function",e.namePos,{name:e.nameRaw}));case d.TreeNodeType.STATEMENT:return e.subType==d.TreeNodeType.STATEMENT_EQUATION&&n.acceptEquations.isNo()?this.errors.add(new u.Message("e_sem_forbidden_equation",e.subActions[0].pos)):e.subType==d.TreeNodeType.STATEMENT_INEQUALITY&&n.acceptInequalities.isNo()&&this.errors.add(new u.Message("e_sem_forbidden_inequality",e.subActions[0].pos)),void this.validateSubNodes(e,t,n);case d.TreeNodeType.SEQUENCE_OF_STATEMENTS:return n.acceptSequenceOfStatements.isNo()&&e.subActions[0].type==h.TokenType.SEMICOLON&&(1==e.subNodes.length?this.errors.add(new u.Message("e_sem_forbidden_semicolon",e.subActions[0].pos)):this.errors.add(new u.Message("e_sem_forbidden_sequence_of_statements",e.subActions[0].pos))),void this.validateSubNodes(e,t,n);default:this.validateSubNodes(e,t,n)}}},{key:"validateSubNodes",value:function(e,t,n){var a;for(var o in e.subNodes)e.subNodes.hasOwnProperty(o)&&(a=e.subNodes[o],a.isEmpty()||a.isUnparsed()||this.validateNode(a,t,n))}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=t.Dialect=function o(){n(this,o)};a.WEST=1,a.WEST_LONG=2,a.EAST=16,a.GREEK=32,a.RUS=48,a.RUS_LONG=49,a.PROGRAMMING=64,a.MISC=0},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Locale=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(4),r=a(i),u=n(22),c=a(u),l=n(2);t.Locale=function(){function e(t){o(this,e),this.data=t}return s(e,[{key:"toMarkdown",value:function(e){if(e instanceof l.Message){var t=e.type,n=this.messages[t];if(r["default"].isString(n))return n;if(r["default"].isFunction(n)){var a=r["default"].extend(e.params||{},e.pos);return n(a)}}}},{key:"toText",value:function(e){var t=this.toMarkdown(e);return(0,c["default"])(t)}}]),e}()},function(e,t){e.exports=function(e,t){t=t||{},t.stripListLeaders=t.hasOwnProperty("stripListLeaders")?t.stripListLeaders:!0,t.gfm=t.hasOwnProperty("gfm")?t.gfm:!0;var n=e;try{t.stripListLeaders&&(n=n.replace(/^([\s\t]*)([\*\-\+]|\d\.)\s+/gm,"$1")),t.gfm&&(n=n.replace(/\n={2,}/g,"\n").replace(/~~/g,"").replace(/`{3}.*\n/g,"")),n=n.replace(/<(.*?)>/g,"$1").replace(/^[=\-]{2,}\s*$/g,"").replace(/\[\^.+?\](\: .*?$)?/g,"").replace(/\s{0,2}\[.*?\]: .*?$/g,"").replace(/\!\[.*?\][\[\(].*?[\]\)]/g,"").replace(/\[(.*?)\][\[\(].*?[\]\)]/g,"$1").replace(/>/g,"").replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g,"").replace(/^\#{1,6}\s*([^#]*)\s*(\#{1,6})?/gm,"$1").replace(/([\*_]{1,3})(\S.*?\S)\1/g,"$2").replace(/(`{3,})(.*?)\1/gm,"$2").replace(/^-{3,}\s*$/g,"").replace(/`(.+?)`/g,"$1").replace(/\n{2,}/g,"\n\n")}catch(a){return console.error(a),e}return n}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Symbols=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(4),r=a(i);t.Symbols=function(){function e(){o(this,e),this.functionDefinitionsById=[],this.constantDefinitionsById=[],this.variableDefinitionsById=[],this.functionIdsByAlias={},this.constantIdsByAlias={},this.variableIdsByAlias={},this.disableAutoIndexing(),this.initialize(),this.enableAutoIndexing(),this.indexAliases(this.functionDefinitionsById,this.functionIdsByAlias),this.indexAliases(this.constantDefinitionsById,this.constantIdsByAlias),this.indexAliases(this.variableDefinitionsById,this.variableIdsByAlias)}return s(e,[{key:"initialize",value:function(){}},{key:"disableAutoIndexing",value:function(){this.autoIndexingDisabled=!0}},{key:"enableAutoIndexing",value:function(){delete this.autoIndexingDisabled}},{key:"addFunction",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2],a=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],o=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],s={};if(s.id=this.extractIdFromAliases(e),s.aliases=e,!r["default"].isFunction(t))throw new Error("Function "+s.id+" does not have a valid executor");s.executor=t,r["default"].isNumber(n)?s.argumentCount=n:r["default"].isArray(n)&&(s.argumentCount={min:n[0],max:1==n.length?Number.POSITIVE_INFINITY:n[1]}),s.nonSimplifiable=!!a,s.calculateForNaNs=!!o,this.functionDefinitionsById[s.id]=s,this.autoIndexingDisabled||this.indexAliases(this.functionDefinitionsById,this.functionIdsByAlias)}},{key:"addConstant",value:function(e,t){var n={};n.id=this.extractIdFromAliases(e),n.aliases=e,n.value=t,this.constantDefinitionsById[n.id]=n,this.autoIndexingDisabled||this.indexAliases(this.constantDefinitionsById,this.constantIdsByAlias)}},{key:"addVariable",value:function(e){var t=[];t.id=this.extractIdFromAliases(e),t.aliases=e,this.variableDefinitionsById[t.id]=t,this.autoIndexingDisabled||this.indexAliases(this.functionDefinitionsById,this.functionIdsByAlias)}},{key:"findFunction",value:function(e){return this.functionIdsByAlias[e]||null}},{key:"findConstant",value:function(e){return this.constantIdsByAlias[e]||null}},{key:"findVariable",value:function(e){return this.variableIdsByAlias[e]||!1}},{key:"indexAliases",value:function(e,t){r["default"].each(e,function(e,n){r["default"].each(e.aliases,function(e){t[e]=n})})}},{key:"extractIdFromAliases",value:function(e){return r["default"].keys(e)[0]}}]),e}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(3),r=a(i),u=n(8),c=a(u),l=n(16),h=a(l),d=n(19),T=a(d);t.Text=function(){function e(){o(this,e)}return s(e,[{key:"construct",value:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?"":arguments[2];this._tokenStream=new c["default"],this._tree=new h["default"],this._validator=new T["default"],this._validationRules=t,this.errors=new r["default"],this.warnings=new r["default"],this.hasErrors=!1,this.hasWarnings=!1,this.setContent(n)}},{key:"setContent",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return this.content===e?!1:(this.content=e,this._tokenStream.tokenize(e)&&this._tree.parse(this._tokenStream)?(this._validator.validate(this._tree,this._validationRules,!this._tokenStream.errors.isEmpty()||!this._tree.errors.isEmpty()),this.errors=new r["default"](this._tokenStream.errors,this._tree.errors,this._validator.errors).sort(),!0):!1)}},{key:"setValidationRules",value:function(e){return this._validationRules==e?!1:(this._validationRules=e,this._validator.validate(this._tree,this._validationRules)?(this.errors=new r["default"](this._tokenStream.errors,this._tree.errors,this._validator.errors).sort(),!0):!1)}}]),e}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Calculator=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(4),u=a(r),c=n(6),l=a(c),h=n(14),d=a(h),T=n(24),m=a(T),p=t.Calculator=function(){function e(){o(this,e)}return i(e,[{key:"calculateExpression",value:function(e,t,n){e instanceof m["default"]&&(e=e.tree.root),t||(t={});var a=Number.NaN;try{a=this.calculateValueOfTheNode(e,t,n)}catch(o){if(o!=this.COULD_NOT_CALCULATE_EXCEPTION)throw o}return a}},{key:"calculateCachedValues",value:function(e,t,n){e instanceof m["default"]&&(e=e.tree.root),t||(t={});try{this.calculateValueOfTheNode(e,t,n,!0)}catch(a){if(a!=this.COULD_NOT_CALCULATE_EXCEPTION)throw a}}},{key:"clearCachedValues",value:function(e){if(e instanceof m["default"]&&(e=e.tree.root),e.subNodes)for(var t=e.subNodes.length-1;t>=0;t--)this.clearCachedValues(e.subNodes[t]);e.type!=d["default"].NUMBER&&delete e.value}},{key:"calculateValueOfTheNode",value:function(e,t,n,a){if(void 0!==e.value)return e.value;var o=null,i=new Array,r=!0;if(e.type==d["default"].FUNCTION&&n.functions[e.id]&&n.functions[e.id].calculateForNaNs&&(r=!1),e.subNodes)for(var c=e.subNodes.length-1;c>=0;c--){if(void 0===e.subNodes[c].value)if(r)i[c]=this.calculateValueOfTheNode(e.subNodes[c],t,n,a);else try{i[c]=this.calculateValueOfTheNode(e.subNodes[c],t,n,a)}catch(h){if(h!=this.COULD_NOT_CALCULATE_EXCEPTION)throw h}else i[c]=e.subNodes[c].value;if(r&&(void 0===i[c]||null===i[c]))return NaN}if(a&&e.type==d["default"].FUNCTION&&"undefined"!=typeof n.functions[e.id]&&n.functions[e.id].nonSimplifiable)return NaN;var T=i.length;switch(e.type){case d["default"].SYMBOL:if(e.subType==d["default"].STANDARD_CONSTANT){if("undefined"==typeof n.constants[e.id])return NaN;o=n.constants[e.id].value;break}if(void 0!==t[e.id]){o=t[e.id];break}break;case d["default"].FUNCTION:if(e.subType==d["default"].STANDARD_FUNCTION){if(void 0!=s(n.functions[e.id]))return NaN;o=n.functions[e.id].executor(i);break}break;case d["default"].EXPRESSION:o=i[0];for(var c=1;T>c;c++)e.subActions[c-1].type==l["default"].ADD?o+=i[c]:o-=i[c];break;case d["default"].TERM:o=i[0];for(var c=1;T>c;c++)e.subActions[c-1].type==l["default"].MULTIPLY?o*=i[c]:o/=i[c];break;case d["default"].POWER:o=i[0];for(var c=1;T>c;c++)o=Math.pow(o,i[c])}if(isNaN(o)&&!a)throw this.COULD_NOT_CALCULATE_EXCEPTION;return a&&u["default"].isNumber(o)&&!isNaN(o)&&(e.value=o),o}}]),e}();p.COULD_NOT_CALCULATE_EXCEPTION=13},function(e,t,n){"use strict";var a=n(1);a.HumaneMath.validationRules.ABSTRACT_FUNCTION=(new a.HumaneMath.ValidationRules).setRule("allowFunctions",a.HumaneMath.ValidationRule.YES).setRule("allowConstants",a.HumaneMath.ValidationRule.YES).setRule("acceptMathOperations",a.HumaneMath.ValidationRule.YES),a.HumaneMath.validationRules.FUNCTION_Y_X=a.HumaneMath.validationRules.ABSTRACT_FUNCTION.clone().setRule("allowVariables",a.HumaneMath.ValidationRule.ONLY,["x"]),a.HumaneMath.validationRules.FUNCTION_X_Y=a.HumaneMath.validationRules.ABSTRACT_FUNCTION.clone().setRule("allowVariables",a.HumaneMath.ValidationRule.ONLY,["y"]),a.HumaneMath.validationRules.FUNCTION_X_T=a.HumaneMath.validationRules.ABSTRACT_FUNCTION.clone().setRule("allowVariables",a.HumaneMath.ValidationRule.ONLY,["t"]),a.HumaneMath.validationRules.FUNCTION_Y_T=a.HumaneMath.validationRules.FUNCTION_X_T,a.HumaneMath.validationRules.FUNCTION_R_A=a.HumaneMath.validationRules.ABSTRACT_FUNCTION.clone().setRule("allowVariables",a.HumaneMath.ValidationRule.ONLY,["a"]),a.HumaneMath.validationRules.ARG_RANGE=(new a.HumaneMath.ValidationRules).setRule("valueOnlyFinite",a.HumaneMath.ValidationRule.YES).setRule("allowConstants",a.HumaneMath.ValidationRule.YES),a.HumaneMath.validationRules.ARG_STEPS=(new a.HumaneMath.ValidationRules).setRule("valueOnlyFinite",a.HumaneMath.ValidationRule.YES).setRule("valueOnlyInteger",a.HumaneMath.ValidationRule.YES).setRule("valueRange",a.HumaneMath.ValidationRule.ONLY,{min:2,max:1e5}),a.HumaneMath.validationRules.CANVAS_BOUNDS=(new a.HumaneMath.ValidationRules).setRule("valueOnlyFinite",a.HumaneMath.ValidationRule.YES).setRule("allowConstants",a.HumaneMath.ValidationRule.YES).setRule("valueRange",a.HumaneMath.ValidationRule.ONLY,{min:-1e3,max:1e3})},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(1),u=function(e){function t(){return a(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),i(t,[{key:"construct",value:function(){this.addTrigonometricFunctions(),this.addInverseTrigonometricFunctions(),this.addHyperbolicTrigonometricFunctions(),this.addInverseHyperbolicTrigonometricFunctions(),this.addRoundingFunctions(),this.addInvolutionFunctions(),this.addMiscFunctions(),this.addNonMathFunctions(),this.addConstants(),this.addVariables(),this.addEasterEggs()}},{key:"addTrigonometricFunctions",value:function(){this.addFunction({sin:r.HumaneMath.Dialect.WEST,sine:r.HumaneMath.Dialect.WEST_LONG,"син":r.HumaneMath.Dialect.RUS,"синус":r.HumaneMath.Dialect.RUS_LONG},function(e){return Math.sin(e[0])}),this.addFunction({cos:r.HumaneMath.Dialect.WEST,cosine:r.HumaneMath.Dialect.WEST_LONG,"кос":r.HumaneMath.Dialect.RUS,"косинус":r.HumaneMath.Dialect.RUS_LONG},function(e){return Math.cos(e[0])}),this.addFunction({tan:r.HumaneMath.Dialect.WEST,tangent:r.HumaneMath.Dialect.WEST_LONG,tg:r.HumaneMath.Dialect.EAST,"тан":r.HumaneMath.Dialect.RUS,"тангенс":r.HumaneMath.Dialect.RUS_LONG},function(e){return Math.tan(e[0])}),this.addFunction({cot:r.HumaneMath.Dialect.WEST,cotangent:r.HumaneMath.Dialect.WEST_LONG,ctg:r.HumaneMath.Dialect.EAST,ctn:r.HumaneMath.Dialect.EAST,"котан":r.HumaneMath.Dialect.RUS,"котангенс":r.HumaneMath.Dialect.RUS_LONG},function(e){return 1/Math.tan(e[0])}),this.addFunction({sec:r.HumaneMath.Dialect.WEST,secant:r.HumaneMath.Dialect.WEST_LONG,"сек":r.HumaneMath.Dialect.RUS,"секанс":r.HumaneMath.Dialect.RUS_LONG},function(e){return 1/Math.cos(e[0])}),this.addFunction({csc:r.HumaneMath.Dialect.WEST,cosecant:r.HumaneMath.Dialect.WEST_LONG,cosec:r.HumaneMath.Dialect.EAST,"косек":r.HumaneMath.Dialect.RUS,"косеканс":r.HumaneMath.Dialect.RUS_LONG},function(e){return 1/Math.sin(e[0])})}},{key:"addInverseTrigonometricFunctions",value:function(){this.addFunction({arcsin:r.HumaneMath.Dialect.WEST,arcsine:r.HumaneMath.Dialect.WEST_LONG,asin:r.HumaneMath.Dialect.PROGRAMMING,"арксин":r.HumaneMath.Dialect.RUS,"арксинус":r.HumaneMath.Dialect.RUS_LONG},function(e){return Math.asin(e[0])}),this.addFunction({arccos:r.HumaneMath.Dialect.WEST,arccosine:r.HumaneMath.Dialect.WEST_LONG,acos:r.HumaneMath.Dialect.PROGRAMMING,"арккос":r.HumaneMath.Dialect.RUS,"арккосинус":r.HumaneMath.Dialect.RUS_LONG},function(e){return Math.acos(e[0])}),this.addFunction({arctan:r.HumaneMath.Dialect.WEST,arctangent:r.HumaneMath.Dialect.WEST_LONG,arctg:r.HumaneMath.Dialect.EAST,atan:r.HumaneMath.Dialect.PROGRAMMING,"арктан":r.HumaneMath.Dialect.RUS,"арктангенс":r.HumaneMath.Dialect.RUS_LONG},function(e){return Math.atan(e[0])}),this.addFunction({arccot:r.HumaneMath.Dialect.WEST,arccotangent:r.HumaneMath.Dialect.WEST_LONG,arcctg:r.HumaneMath.Dialect.EAST,acot:r.HumaneMath.Dialect.PROGRAMMING,"арккотан":r.HumaneMath.Dialect.RUS,"арккотангенс":r.HumaneMath.Dialect.RUS_LONG},function(e){return(e[0]<0?Math.PI:0)+Math.atan(1/e[0])}),this.addFunction({arcsec:r.HumaneMath.Dialect.WEST,arcsecant:r.HumaneMath.Dialect.WEST_LONG,asec:r.HumaneMath.Dialect.PROGRAMMING,"арксек":r.HumaneMath.Dialect.RUS,"арксеканс":r.HumaneMath.Dialect.RUS_LONG},function(e){return Math.acos(1/e[0])}),this.addFunction({arccsc:r.HumaneMath.Dialect.WEST,arcsecant:r.HumaneMath.Dialect.WEST_LONG,arccosec:r.HumaneMath.Dialect.EAST,acosec:r.HumaneMath.Dialect.PROGRAMMING,"арксек":r.HumaneMath.Dialect.RUS,"арккосеканс":r.HumaneMath.Dialect.RUS_LONG},function(e){return Math.asin(1/e[0])})}},{key:"addHyperbolicTrigonometricFunctions",value:function(){this.addFunction({sinh:r.HumaneMath.Dialect.WEST,sh:r.HumaneMath.Dialect.EAST},function(e){return(Math.exp(e[0])-Math.exp(-e[0]))/2}),this.addFunction({cosh:r.HumaneMath.Dialect.WEST,ch:r.HumaneMath.Dialect.EAST},function(e){return(Math.exp(e[0])+Math.exp(-e[0]))/2}),this.addFunction({tanh:r.HumaneMath.Dialect.WEST,th:r.HumaneMath.Dialect.EAST},function(e){return(Math.exp(2*e[0])-1)/(Math.exp(2*e[0])+1)}),this.addFunction({coth:r.HumaneMath.Dialect.WEST,"сth":r.HumaneMath.Dialect.EAST},function(e){return(Math.exp(2*e[0])+1)/(Math.exp(2*e[0])-1)}),this.addFunction({sech:r.HumaneMath.Dialect.WEST},function(e){return 2/(Math.exp(e[0])+Math.exp(-e[0]))}),this.addFunction({csch:r.HumaneMath.Dialect.WEST,cosech:r.HumaneMath.Dialect.EAST},function(e){return 2/(Math.exp(e[0])-Math.exp(-e[0]))})}},{key:"addInverseHyperbolicTrigonometricFunctions",value:function(){this.addFunction({arcsinh:r.HumaneMath.Dialect.WEST,arsh:r.HumaneMath.Dialect.EAST},function(e){return Math.log(e[0]+Math.sqrt(e[0]*e[0]+1))}),this.addFunction({arccosh:r.HumaneMath.Dialect.WEST,arch:r.HumaneMath.Dialect.EAST},function(e){return e[0]>=1?Math.log(e[0]+Math.sqrt(e[0]*e[0]-1)):NaN}),this.addFunction({arctanh:r.HumaneMath.Dialect.WEST,arth:r.HumaneMath.Dialect.EAST},function(e){return e[0]<1&&e[0]>-1?Math.log((1+e[0])/(1-e[0]))/2:NaN}),this.addFunction({arccoth:r.HumaneMath.Dialect.WEST,arcth:r.HumaneMath.Dialect.EAST},function(e){return e[0]>1||e[0]<-1?Math.log((e[0]+1)/e[0]-1)/2:NaN}),this.addFunction({arcsech:r.HumaneMath.Dialect.WEST,arsch:r.HumaneMath.Dialect.EAST},function(e){return e[0]>0&&e[0]<=1?Math.log((1+Math.sqrt(1-e[0]*e[0]))/e[0]):NaN}),this.addFunction({arccsch:r.HumaneMath.Dialect.WEST,arcsch:r.HumaneMath.Dialect.EAST},function(e){return Math.log(1/e[0]+Math.sqrt(e[0]*e[0]+1)/Math.abs(e[0]))})}},{key:"addRoundingFunctions",value:function(){this.addFunction({round:r.HumaneMath.Dialect.WEST},function(e){return Math.round(e[0])}),this.addFunction({floor:r.HumaneMath.Dialect.WEST},function(e){return Math.floor(e[0])}),this.addFunction({ceil:r.HumaneMath.Dialect.WEST,ceiling:r.HumaneMath.Dialect.WEST_LONG},function(e){return Math.ceil(e[0])}),this.addFunction({frac:r.HumaneMath.Dialect.WEST,fractional:r.HumaneMath.Dialect.WEST_LONG,fract:r.HumaneMath.Dialect.MISC},function(e){return e[0]-Math.floor(e[0])})}},{key:"addInvolutionFunctions",value:function(){this.addFunction({pow:r.HumaneMath.Dialect.WEST,power:r.HumaneMath.Dialect.WEST_LONG,"степень":r.HumaneMath.Dialect.RUS_LONG},function(e){return Math.pow(e[0],e[1])},2),this.addFunction({sqr:r.HumaneMath.Dialect.WEST,"квадрат":r.HumaneMath.Dialect.RUS_LONG},function(e){return Math.pow(e[0],2)}),this.addFunction({sqrt:r.HumaneMath.Dialect.WEST,"кк":r.HumaneMath.Dialect.RUS},function(e){return Math.sqrt(e[0])}),this.addFunction({cbrt:r.HumaneMath.Dialect.WEST},function(e){return e[0]>=0?Math.pow(e[0],1/3):-Math.pow(-e[0],1/3)}),this.addFunction({root:r.HumaneMath.Dialect.WEST,"корень":r.HumaneMath.Dialect.RUS_LONG},function(e){return Math.floor(e[0])!=e[0]||e[0]<1?NaN:e[1]>=0?Math.pow(e[1],1/e[0]):Math.floor(e[0]/2)==e[0]/2?NaN:-Math.pow(-e[1],1/e[0])}),this.addFunction({exp:r.HumaneMath.Dialect.WEST},function(e){return Math.exp(e)}),this.addFunction({log:r.HumaneMath.Dialect.WEST,"лог":r.HumaneMath.Dialect.RUS,"логарифм":r.HumaneMath.Dialect.RUS_LONG},function(e){return Math.log(e[1])/Math.log(e[0])},2),this.addFunction({ln:r.HumaneMath.Dialect.WEST},function(e){return Math.log(e[0])}),this.addFunction({lg:r.HumaneMath.Dialect.WEST},function(e){return Math.log(e[0])/Math.LN10})}},{key:"addMiscFunctions",value:function(){this.addFunction({abs:r.HumaneMath.Dialect.WEST,modulus:r.HumaneMath.Dialect.MISC,"модуль":r.HumaneMath.Dialect.RUS_LONG},function(e){return Math.abs(e[0])}),this.addFunction({random:r.HumaneMath.Dialect.WEST},function(){return Math.random()},0,!0),this.addFunction({random2:r.HumaneMath.Dialect.WEST},function(){return Math.random()},0),this.addFunction({sgn:r.HumaneMath.Dialect.WEST,sign:r.HumaneMath.Dialect.WEST_LONG},function(e){return isNaN(e[0])?NaN:0==e[0]?0:e[0]>0?1:-1})}},{key:"addNonMathFunctions",value:function(){this.addFunction({max:r.HumaneMath.Dialect.WEST,maximum:r.HumaneMath.Dialect.WEST_LONG,"макс":r.HumaneMath.Dialect.RUS,"максимум":r.HumaneMath.Dialect.RUS_LONG},function(e){for(var t=e[0],n=1;n<e.length;n++)t=Math.max(t,e[n]);return t},[2]),this.addFunction({min:r.HumaneMath.Dialect.WEST,minimum:r.HumaneMath.Dialect.WEST_LONG,"мин":r.HumaneMath.Dialect.RUS,"минимум":r.HumaneMath.Dialect.RUS_LONG},function(e){for(var t=e[0],n=1;n<e.length;n++)t=Math.min(t,e[n]);return t},[2]),this.addFunction({"if":r.HumaneMath.Dialect.WEST,"если":r.HumaneMath.Dialect.RUS},function(e){return e[0]>0?e[1]:e[2]},[2],!1,!0)}},{key:"addConstants",value:function(){this.addConstant({pi:r.HumaneMath.Dialect.WEST,"π":r.HumaneMath.Dialect.GREEK,"пи":r.HumaneMath.Dialect.RUS},Math.PI),this.addConstant({e:r.HumaneMath.Dialect.WEST,"е":r.HumaneMath.Dialect.RUS},Math.E),this.addConstant({phi:r.HumaneMath.Dialect.WEST,ph:r.HumaneMath.Dialect.MISC,"φ":r.HumaneMath.Dialect.GREEK,"фи":r.HumaneMath.Dialect.RUS},1.6180339887)}},{key:"addVariables",value:function(){this.addVariable("x",{"х":r.HumaneMath.Dialect.RUS}),this.addVariable("y",{"у":r.HumaneMath.Dialect.RUS}),this.addVariable("t",{}),this.addVariable("a",{"а":r.HumaneMath.Dialect.RUS})}},{key:"addEasterEggs",value:function(){this.addConstant({answer_to_the_ultimate_question_of_life_the_universe_and_everything:r.HumaneMath.Dialect.WEST,"ответ_на_главный_вопрос_жизни_вселенной_и_всего_такого":r.HumaneMath.Dialect.RUS},42)}}]),t}(r.HumaneMath.Symbols);r.HumaneMath.StandardSymbols=u,r.HumaneMath.symbols.STANDARD=new u},function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,s,i=n(1);i.HumaneMath.addLocale("en",{tokenNames:(o={},a(o,i.HumaneMath.TokenType.RB_LEFT,"a left bracket"),a(o,i.HumaneMath.TokenType.RB_RIGHT,"a right bracket"),a(o,i.HumaneMath.TokenType.COMMA,"a comma"),a(o,i.HumaneMath.TokenType.EQUAL,"an equality sign"),a(o,i.HumaneMath.TokenType.LESS,"a “less than” sign"),a(o,i.HumaneMath.TokenType.MORE,"a “more than” sign"),a(o,i.HumaneMath.TokenType.LESS_EQUAL,"a “less than or equal” sign"),a(o,i.HumaneMath.TokenType.MORE_EQUAL,"a “more than or equal” sign"),a(o,i.HumaneMath.TokenType.ADD,"an addition sign"),a(o,i.HumaneMath.TokenType.SUBTRACT,"a subtraction sign"),a(o,i.HumaneMath.TokenType.MULTIPLY,"a multiplication sign"),a(o,i.HumaneMath.TokenType.DIVIDE,"a division sign"),a(o,i.HumaneMath.TokenType.POWER,"an exponentiation sign"),a(o,i.HumaneMath.TokenType.NUMBER,"a number"),a(o,i.HumaneMath.TokenType.SYMBOL,"a name of a variable or a function"),a(o,i.HumaneMath.TokenType.SEMICOLON,"a semicolon"),o),messages:(s={},a(s,"e_lex_"+i.HumaneMath.TokenType.E_UNKNOWN,function(e){return"You cannot use symbol __"+e.raw+"__ in formulas."}),a(s,"e_lex_"+i.HumaneMath.TokenType.E_NUMBER_MALFORMED,"Malformed number. A number can contain only one dot and the dot must be surrounded with digits, e.g. _“3.14”_."),a(s,"e_lex_"+i.HumaneMath.TokenType.E_NUMBER_EXPONENTIAL,"It is not allowed to use an exponential form for numbers. Please, reformat it."),a(s,"e_lex_"+i.HumaneMath.TokenType.E_VERTICAL_SLASH,"It is not allowed to use vertical slash in formulas. To calculate absolute values, please use function _abs(argument)_."),a(s,"e_lex_"+i.HumaneMath.TokenType.E_STARSTAR,"It is not allowed to use __“**”__. To exponentiate a number, use _caret sign (“^”)_ or function _power(base, exponent)_."),a(s,"e_lex_"+i.HumaneMath.TokenType.E_EQUALEQUAL,"It is not allowed to use __“==”__. Use a _single_ equality sign for comparison and assignments."),a(s,"e_lex_"+i.HumaneMath.TokenType.E_MISPLACED_DOT,"The dot can be used only to separate digits in real numbers. For multiplication use _star sign (“*”)_."),a(s,"e_lex_"+i.HumaneMath.TokenType.E_SB_LEFT,"Square brackets can not be used. Use a left round bracket instead."),a(s,"e_lex_"+i.HumaneMath.TokenType.E_SB_RIGHT,"Square brackets can not be used. Use a right round bracket instead."),a(s,"e_lex_"+i.HumaneMath.TokenType.E_CB_LEFT,"Curly brackets can not be used. Use a left round bracket instead."),a(s,"e_lex_"+i.HumaneMath.TokenType.E_CB_RIGHT,"Curly brackets can not be used. Use a right round bracket instead."),a(s,"e_lex_"+i.HumaneMath.TokenType.E_AB_LEFT,"Angle brackets can not be used. Use a left round bracket instead."),a(s,"e_lex_"+i.HumaneMath.TokenType.E_AB_RIGHT,"Angle brackets can not be used. Use a right round bracket instead."),a(s,"e_lex_"+i.HumaneMath.TokenType.E_BACK_SLASH,"Use of backslash is not allowed. To divide use _forward slash (“/”)_."),a(s,"e_lex_"+i.HumaneMath.TokenType.E_REST,"The input string is too long and it can’t be read completely."),a(s,"e_syn_unknown","Unknown syntax error detected."),a(s,"e_syn_function_argument_empty","Function argument must not be empty."),a(s,"e_syn_function_argument_wrong_symbol",function(e){return"It is not allowed to use "+(void 0).tokenNames[e.currentToken.type]+" in a function argument."}),a(s,"e_syn_function_argument_semicolon","It is not allowed to use a semicolon to separate function arguments. Use a comma instead."),a(s,"e_syn_missing_rb","Missing right bracket."),a(s,"e_syn_missing_multiply",function(e){return"It is not allowed to write "+(void 0).tokenNames[e.currentToken.type]+" right after "+(void 0).tokenNames[e.previousToken.type]+" Multiplication sign or any other mathematical operation is probably missing."}),a(s,"e_syn_missing_operand",function(e){return"An operand (number, constant, function, etc.) is missing between "+e.previousToken.raw+" and "+e.currentToken.raw+"”."}),a(s,"e_syn_missing_operand_at_begin",function(e){return"An operand must go before "+(void 0).tokenNames[e.currentToken.type]+"."}),a(s,"e_syn_missing_operand_at_end",function(e){return"Mathematical operator ("+(void 0).tokenNames[e.currentToken.type]+") must be followed by an operand (number, constant, function, etc.)."}),a(s,"e_syn_extra_rb","An extra right bracket found."),a(s,"e_syn_brackets_empty","Empty brackets are allowed only for function calls with no arguments."),a(s,"e_syn_brackets_wrong_symbol",function(e){return"It is not allowed to use "+(void 0).tokenNames[e.currentToken.type]+" inside of an expression in brackets."}),a(s,"e_syn_statements_wrong_symbol",function(e){return"It is not allowed to use "+(void 0).tokenNames[e.currentToken.type]+" here.";
}),a(s,"e_syn_statements_comma","It is not allowed to use a comma here as it is acceptable only in function arguments. To separate statements use semicolons."),a(s,"e_syn_statement_empty_left",function(e){return"An expression expected before "+(void 0).tokenNames[e.currentToken.type]+"."}),a(s,"e_syn_statement_empty_right",function(e){return"An expression expected after "+(void 0).tokenNames[e.currentToken.type]+"."}),a(s,"e_syn_statement_extra_statement_sign",function(e){return"It is not allowed to use "+(void 0).tokenNames[e.currentToken.type]+" here. A statement has already got "+(void 0).tokenNames[e.statementSign.type]+"."}),a(s,"e_sem_constant_forbidden_all","It is not allowed to use constants in this input field."),a(s,"e_sem_constant_forbidden_this",function(e){return"It is not allowed to use constant __"+e.name+"__ in this input field."}),a(s,"e_sem_constant_as_function",function(e){return"You are trying to use a constant __"+e.name+"__ as a function. Remove following brackets or add a mathematical operation after the constant."}),a(s,"e_sem_variable_forbidden_all","It is not allowed to use variables in this input field."),a(s,"e_sem_variable_forbidden_this",function(e){return"It is not allowed to use variable __"+e.name+"__ in this input field."}),a(s,"e_sem_variable_as_function",function(e){return"You are trying to use a variable __"+e.name+"__ as a function. Remove following brackets or add a mathematical operation after the variable."}),a(s,"e_sem_function_forbidden_all","It is not allowed to use functions in this input field."),a(s,"e_sem_function_forbidden_this",function(e){return"It is not allowed to use function __"+e.name+"__ in this input field."}),a(s,"e_sem_function_as_symbol",function(e){return"You are trying to use function __"+e.name+"__ without brackets. Put the brackets after a function name."}),a(s,"e_sem_function_arguments_few_exact","Function __${params.name}__ has too few arguments (${params.argumentCount} expected, but found ${params.realArgumentCount})."),a(s,"e_sem_function_arguments_extra_exact",function(e){return"Function __"+e.name+"__ has too many arguments ("+e.argumentCount+" expected, but found "+e.realArgumentCount+")."}),a(s,"e_sem_function_arguments_extra_0",function(e){return"Function __"+e.name+"__ has does not need any arguments, remove them all."}),a(s,"e_sem_function_arguments_few_range_n_inf",function(e){return"Function __"+e.name+"__ has too few arguments (more than "+e.argumentCount.min+" expected, but found "+e.realArgumentCount+")."}),a(s,"e_sem_function_arguments_few_range_n_n",function(e){return"Function __"+e.name+"__ has too few arguments (from "+e.argumentCount.min+" to "+e.argumentCount.max+" expected, but found "+e.realArgumentCount+")."}),a(s,"e_sem_function_arguments_extra_range_n_n",function(e){return"Function __"+e.name+"__ has too many arguments (from "+e.argumentCount.min+" to "+e.argumentCount.max+" expected, but found "+e.realArgumentCount+")."}),a(s,"e_sem_unknown_symbol",function(e){return"Constant or variable __"+e.name+"__ is unknown."}),a(s,"e_sem_unknown_function",function(e){return"Function with name __"+e.name+"__ is unknown."}),a(s,"e_sem_forbidden_equation","It is not allowed to use equations in this input field."),a(s,"e_sem_forbidden_inequality","It is not allowed to use inequalities in this input field."),a(s,"e_sem_forbidden_semicolon","It is not allowed to use a semicolon in this input field."),a(s,"e_sem_forbidden_sequence_of_statements","Semicolons can be used only to separate statements and it is not allowed to use more than one statement in this input field."),a(s,"e_sem_forbidden_empty","The field must not be empty."),a(s,"e_sem_expected_finite","The value of the field must be finite."),a(s,"e_sem_expected_int",function(e){return"The value of the field must be integer, but is equal to "+e.value+"."}),a(s,"e_sem_expected_range",function(e){return"The value of the field is supposed to be in the range between "+e.range.min+" and "+e.range.max+", but is equal to "+e.value+"."}),a(s,"e_sem_expected_gt",function(e){return"The value of the field is supposed to be greater than "+e.bound+", but is equal to "+e.value+"."}),a(s,"e_sem_expected_lt",function(e){return"The value of the field is supposed to be less than "+e.bound+", but is equal to "+e.value+"."}),s)}),i.HumaneMath.setLocale("en")}])});
//# sourceMappingURL=humane-math.min.js.map
